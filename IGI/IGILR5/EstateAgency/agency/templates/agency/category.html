{% extends 'agency/base.html' %}
{% load static %}
{% block title %}Categories{% endblock %}

{% block content %}
<nav class="navbar navbar-expand-sm navbar-dark sec-nav">
		<div class="container justify-content-center">
			<ul class="nav navbar-nav w-100 flex-nowrap">
				{% for cat in cats%}
					<li class="nav-item active">
					{%if cat == cat_selected%}
						<p class="nav-link-selected lk" >{{cat.name}}</p>
					{%else%}
						{%if Agency%}
							<a class="nav-link lk" href="{{cat.get_absolute_agency_url}}" >{{cat.name}}</a>
						{%else%}
							<a class="nav-link lk" href="{{cat.get_absolute_user_url}}" >{{cat.name}}</a>
						{%endif%}
					{%endif%}
				 {% endfor %}
					</li>
			</ul>
		</div>
	</nav>
	<form class="d-flex" role="search" id="filter-form">
        <input class="form-control search-input me-2" type="number" min="1" placeholder="Min price" aria-label="Search" name ="min_area" value="{{ search_input }}">
		<input class="form-control search-input me-2" type="number" min="1" placeholder="Max price" aria-label="Search" name ="max_area" value="{{ search_input }}">
        <button type="submit" class="btn btn-dark">GET</button>
	</form>
	<form class="d-flex" role="search" id="search-form">
        <input class="form-control search-input me-2" type="search" placeholder="Search" aria-label="Search" name ="search_area" value="{{ search_input }}">
        <button type="submit" id="search_id" class="btn btn-dark">FIND</button>
	</form>
    <link rel="stylesheet" href="{% static 'agency/css/CategoriesCartCheckout.css' %}">

	<div style="display: flex; flex-wrap: wrap; width: 90%; margin: 50px auto;" class="row">

		{%if realtys_city_user%}
		<h3 style="display: inline-block; float: right"><strong>Realities in you city</strong></h3>
		<hr>
		{%for realty in realtys_city_user%}
		<div style="width: 274px; height: 300px; flex-basis: 25%; max-width: 274px; margin-bottom: 112px;" class="col-lg-4">
			<img style="height: 300px;" class="thumbnail" src="{{realty.photo.url}}">
			<div class="box-element product">
				<h6><strong>{{realty.name}}</strong></h6>
				<h6><strong>{{realty.address.city}}</strong></h6>
				<hr>
				<a class="btn btn-outline-success" href="{{realty.get_absolute_url}}">View</a>
				<h4 style="display: inline-block; float: right"><strong>${{realty.price}}</strong></h4>
			</div>
		</div>
		{%endfor%}
		{%endif%}

		<h3 style="display: inline-block; float: right"><strong>All realities</strong></h3>
		<hr>
		{%for realty in realties%}
		<div style="width: 274px; height: 300px; flex-basis: 25%; max-width: 274px; margin-bottom: 112px;" class="col-lg-4">
			<img style="height: 300px;" class="thumbnail" src="{{realty.photo.url}}">
			<div class="box-element product">
				<h6><strong>{{realty.name}}</strong></h6>
				<h6><strong>{{realty.address.city}}</strong></h6>
				<hr>
				<a class="btn btn-outline-success" href="{{realty.get_absolute_url}}">View</a>
				<h4 style="display: inline-block; float: right"><strong>${{realty.price}}</strong></h4>


			</div>
		</div>

		{%endfor%}


	</div>
<script>
    const form = document.querySelector('#filter-form');
    const button = form.querySelector('button[type="submit"]');

    button.addEventListener('click', (event) => {
        event.preventDefault();
        form.submit();
    });

    const form1 = document.querySelector('#search-form');
    const button1 = document.getElementById('search_id');


    button1.addEventListener('click', (event) => {
        event.preventDefault();
        form1.submit();
    });
    </script>
{% endblock %}